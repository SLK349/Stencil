import{r as t,d as s,w as e,h as i,H as n,e as o}from"./p-df30d222.js";import{b as a}from"./p-f5e0d65c.js";import{i as r}from"./p-15a24f88.js";import{c,h}from"./p-100c2286.js";import{g as l}from"./p-64733d3b.js";const d=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;align-items:stretch;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;user-select:none}:host(.segment-scrollable){justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}";const u=d;const f=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;align-items:stretch;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;user-select:none}:host(.segment-scrollable){justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}";const g=f;const m=class{constructor(e){t(this,e);this.ionChange=s(this,"ionChange",7);this.ionSelect=s(this,"ionSelect",7);this.ionStyle=s(this,"ionStyle",7);this.onClick=t=>{const s=t.target;const e=this.checked;if(s.tagName==="ION-SEGMENT"){return}this.value=s.value;if(s!==e){this.emitValueChange()}if(this.scrollable||!this.swipeGesture){if(e){this.checkButton(e,s)}else{this.setCheckedClasses()}}};this.getSegmentButton=t=>{var s,e;const i=this.getButtons().filter((t=>!t.disabled));const n=i.findIndex((t=>t===document.activeElement));switch(t){case"first":return i[0];case"last":return i[i.length-1];case"next":return(s=i[n+1])!==null&&s!==void 0?s:i[0];case"previous":return(e=i[n-1])!==null&&e!==void 0?e:i[i.length-1];default:return null}};this.activated=false;this.color=undefined;this.disabled=false;this.scrollable=false;this.swipeGesture=true;this.value=undefined;this.selectOnFocus=false}colorChanged(t,s){if(s===undefined&&t!==undefined||s!==undefined&&t===undefined){this.emitStyle()}}swipeGestureChanged(){this.gestureChanged()}valueChanged(t){this.ionSelect.emit({value:t});this.scrollActiveButtonIntoView()}disabledChanged(){this.gestureChanged();const t=this.getButtons();for(const s of t){s.disabled=this.disabled}}gestureChanged(){if(this.gesture){this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}}connectedCallback(){this.emitStyle()}componentWillLoad(){this.emitStyle()}async componentDidLoad(){this.setCheckedClasses();this.ionSelect.emit({value:this.value});a((()=>{this.scrollActiveButtonIntoView(false)}));this.gesture=(await import("./p-52ed752a.js")).createGesture({el:this.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:false,onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)});this.gestureChanged();if(this.disabled){this.disabledChanged()}}onStart(t){this.valueBeforeGesture=this.value;this.activate(t)}onMove(t){this.setNextIndex(t)}onEnd(t){this.setActivated(false);this.setNextIndex(t,true);t.event.stopImmediatePropagation();const s=this.value;if(s!==undefined){if(this.valueBeforeGesture!==s){this.emitValueChange()}}this.valueBeforeGesture=undefined}emitValueChange(){const{value:t}=this;this.ionChange.emit({value:t})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find((t=>t.value===this.value))}setActivated(t){const s=this.getButtons();s.forEach((s=>{if(t){s.classList.add("segment-button-activated")}else{s.classList.remove("segment-button-activated")}}));this.activated=t}activate(t){const s=t.event.target;const e=this.getButtons();const i=e.find((t=>t.value===this.value));if(s.tagName!=="ION-SEGMENT-BUTTON"){return}if(!i){this.value=s.value;this.setCheckedClasses()}if(this.value===s.value){this.setActivated(true)}}getIndicator(t){const s=t.shadowRoot||t;return s.querySelector(".segment-button-indicator")}checkButton(t,s){const i=this.getIndicator(t);const n=this.getIndicator(s);if(i===null||n===null){return}const o=i.getBoundingClientRect();const a=n.getBoundingClientRect();const r=o.width/a.width;const c=o.left-a.left;const h=`translate3d(${c}px, 0, 0) scaleX(${r})`;e((()=>{n.classList.remove("segment-button-indicator-animated");n.style.setProperty("transform",h);n.getBoundingClientRect();n.classList.add("segment-button-indicator-animated");n.style.setProperty("transform","")}));this.value=s.value;this.setCheckedClasses()}setCheckedClasses(){const t=this.getButtons();const s=t.findIndex((t=>t.value===this.value));const e=s+1;for(const s of t){s.classList.remove("segment-button-after-checked")}if(e<t.length){t[e].classList.add("segment-button-after-checked")}}scrollActiveButtonIntoView(t=true){const{scrollable:s,value:e,el:i}=this;if(s){const s=this.getButtons();const n=s.find((t=>t.value===e));if(n!==undefined){const s=i.getBoundingClientRect();const e=n.getBoundingClientRect();const o=e.x-s.x;const a=o-s.width/2+e.width/2;i.scrollBy({top:0,left:a,behavior:t?"smooth":"instant"})}}}setNextIndex(t,s=false){const e=r(this.el);const i=this.activated;const n=this.getButtons();const o=n.findIndex((t=>t.value===this.value));const a=n[o];let c;let h;if(o===-1){return}const l=a.getBoundingClientRect();const d=l.left;const u=l.width;const f=t.currentX;const g=l.top+l.height/2;const m=this.el.getRootNode();const b=m.elementFromPoint(f,g);const p=e?f>d+u:f<d;const v=e?f<d:f>d+u;if(i&&!s){if(p){const t=o-1;if(t>=0){h=t}}else if(v){if(i&&!s){const t=o+1;if(t<n.length){h=t}}}if(h!==undefined&&!n[h].disabled){c=n[h]}}if(!i&&s){c=b}if(c!=null){if(c.tagName==="ION-SEGMENT"){return false}if(a!==c){this.checkButton(a,c)}}return true}emitStyle(){this.ionStyle.emit({segment:true})}onKeyDown(t){const s=r(this.el);let e=this.selectOnFocus;let i;switch(t.key){case"ArrowRight":t.preventDefault();i=s?this.getSegmentButton("previous"):this.getSegmentButton("next");break;case"ArrowLeft":t.preventDefault();i=s?this.getSegmentButton("next"):this.getSegmentButton("previous");break;case"Home":t.preventDefault();i=this.getSegmentButton("first");break;case"End":t.preventDefault();i=this.getSegmentButton("last");break;case" ":case"Enter":t.preventDefault();i=document.activeElement;e=true}if(!i){return}if(e){const t=this.checked;this.checkButton(t||i,i);if(i!==t){this.emitValueChange()}}i.setFocus()}render(){const t=l(this);return i(n,{key:"22bd7bbecaa9f0c95971565e06ef3fa4ad44a946",role:"tablist",onClick:this.onClick,class:c(this.color,{[t]:true,"in-toolbar":h("ion-toolbar",this.el),"in-toolbar-color":h("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},i("slot",{key:"6d6fe81026928662137b872206de55117fda30a2"}))}get el(){return o(this)}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}};m.style={ios:u,md:g};export{m as ion_segment};
//# sourceMappingURL=p-bdfb2539.entry.js.map