{"version":3,"names":["getRefresherAnimationType","contentEl","previousSibling","previousElementSibling","hasHeader","tagName","createPullingAnimation","type","pullingSpinner","refresherEl","createScaleAnimation","createTranslateAnimation","createBaseAnimation","pullingRefresherIcon","spinner","querySelector","circle","shadowRoot","spinnerArrowContainer","arrowContainer","arrow","baseAnimation","createAnimation","duration","easing","spinnerArrowContainerAnimation","addElement","keyframes","offset","opacity","circleInnerAnimation","strokeDasharray","circleOuterAnimation","transform","arrowContainerAnimation","arrowAnimation","addAnimation","height","clientHeight","spinnerAnimation","createSnapBackAnimation","fromTo","setSpinnerOpacity","style","setProperty","toString","handleScrollWhilePulling","ticks","numTicks","pullAmount","max","writeTask","forEach","el","i","min","range","start","progression","clamp","handleScrollWhileRefreshing","lastVelocityY","translateElement","value","Promise","resolve","trans","transitionEndAsync","undefined","removeProperty","supportsRubberBandScrolling","navigator","maxTouchPoints","CSS","supports","shouldUseNativeRefresher","async","referenceEl","mode","refresherContent","componentOnReady","refreshingSpinner"],"sources":["node_modules/@ionic/core/dist/collection/components/refresher/refresher.utils.js"],"sourcesContent":["/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { writeTask } from \"@stencil/core\";\nimport { createAnimation } from \"../../utils/animation/animation\";\nimport { clamp, componentOnReady, transitionEndAsync } from \"../../utils/helpers\";\nexport const getRefresherAnimationType = (contentEl) => {\n    const previousSibling = contentEl.previousElementSibling;\n    const hasHeader = previousSibling !== null && previousSibling.tagName === 'ION-HEADER';\n    return hasHeader ? 'translate' : 'scale';\n};\nexport const createPullingAnimation = (type, pullingSpinner, refresherEl) => {\n    return type === 'scale'\n        ? createScaleAnimation(pullingSpinner, refresherEl)\n        : createTranslateAnimation(pullingSpinner, refresherEl);\n};\nconst createBaseAnimation = (pullingRefresherIcon) => {\n    const spinner = pullingRefresherIcon.querySelector('ion-spinner');\n    const circle = spinner.shadowRoot.querySelector('circle');\n    const spinnerArrowContainer = pullingRefresherIcon.querySelector('.spinner-arrow-container');\n    const arrowContainer = pullingRefresherIcon.querySelector('.arrow-container');\n    const arrow = arrowContainer ? arrowContainer.querySelector('ion-icon') : null;\n    const baseAnimation = createAnimation().duration(1000).easing('ease-out');\n    const spinnerArrowContainerAnimation = createAnimation()\n        .addElement(spinnerArrowContainer)\n        .keyframes([\n        { offset: 0, opacity: '0.3' },\n        { offset: 0.45, opacity: '0.3' },\n        { offset: 0.55, opacity: '1' },\n        { offset: 1, opacity: '1' },\n    ]);\n    const circleInnerAnimation = createAnimation()\n        .addElement(circle)\n        .keyframes([\n        { offset: 0, strokeDasharray: '1px, 200px' },\n        { offset: 0.2, strokeDasharray: '1px, 200px' },\n        { offset: 0.55, strokeDasharray: '100px, 200px' },\n        { offset: 1, strokeDasharray: '100px, 200px' },\n    ]);\n    const circleOuterAnimation = createAnimation()\n        .addElement(spinner)\n        .keyframes([\n        { offset: 0, transform: 'rotate(-90deg)' },\n        { offset: 1, transform: 'rotate(210deg)' },\n    ]);\n    /**\n     * Only add arrow animation if present\n     * this allows users to customize the spinners\n     * without errors being thrown\n     */\n    if (arrowContainer && arrow) {\n        const arrowContainerAnimation = createAnimation()\n            .addElement(arrowContainer)\n            .keyframes([\n            { offset: 0, transform: 'rotate(0deg)' },\n            { offset: 0.3, transform: 'rotate(0deg)' },\n            { offset: 0.55, transform: 'rotate(280deg)' },\n            { offset: 1, transform: 'rotate(400deg)' },\n        ]);\n        const arrowAnimation = createAnimation()\n            .addElement(arrow)\n            .keyframes([\n            { offset: 0, transform: 'translateX(2px) scale(0)' },\n            { offset: 0.3, transform: 'translateX(2px) scale(0)' },\n            { offset: 0.55, transform: 'translateX(-1.5px) scale(1)' },\n            { offset: 1, transform: 'translateX(-1.5px) scale(1)' },\n        ]);\n        baseAnimation.addAnimation([arrowContainerAnimation, arrowAnimation]);\n    }\n    return baseAnimation.addAnimation([spinnerArrowContainerAnimation, circleInnerAnimation, circleOuterAnimation]);\n};\nconst createScaleAnimation = (pullingRefresherIcon, refresherEl) => {\n    /**\n     * Do not take the height of the refresher icon\n     * because at this point the DOM has not updated,\n     * so the refresher icon is still hidden with\n     * display: none.\n     * The `ion-refresher` container height\n     * is roughly the amount we need to offset\n     * the icon by when pulling down.\n     */\n    const height = refresherEl.clientHeight;\n    const spinnerAnimation = createAnimation()\n        .addElement(pullingRefresherIcon)\n        .keyframes([\n        { offset: 0, transform: `scale(0) translateY(-${height}px)` },\n        { offset: 1, transform: 'scale(1) translateY(100px)' },\n    ]);\n    return createBaseAnimation(pullingRefresherIcon).addAnimation([spinnerAnimation]);\n};\nconst createTranslateAnimation = (pullingRefresherIcon, refresherEl) => {\n    /**\n     * Do not take the height of the refresher icon\n     * because at this point the DOM has not updated,\n     * so the refresher icon is still hidden with\n     * display: none.\n     * The `ion-refresher` container height\n     * is roughly the amount we need to offset\n     * the icon by when pulling down.\n     */\n    const height = refresherEl.clientHeight;\n    const spinnerAnimation = createAnimation()\n        .addElement(pullingRefresherIcon)\n        .keyframes([\n        { offset: 0, transform: `translateY(-${height}px)` },\n        { offset: 1, transform: 'translateY(100px)' },\n    ]);\n    return createBaseAnimation(pullingRefresherIcon).addAnimation([spinnerAnimation]);\n};\nexport const createSnapBackAnimation = (pullingRefresherIcon) => {\n    return createAnimation()\n        .duration(125)\n        .addElement(pullingRefresherIcon)\n        .fromTo('transform', 'translateY(var(--ion-pulling-refresher-translate, 100px))', 'translateY(0px)');\n};\n// iOS Native Refresher\n// -----------------------------\nexport const setSpinnerOpacity = (spinner, opacity) => {\n    spinner.style.setProperty('opacity', opacity.toString());\n};\nexport const handleScrollWhilePulling = (ticks, numTicks, pullAmount) => {\n    const max = 1;\n    writeTask(() => {\n        ticks.forEach((el, i) => {\n            /**\n             * Compute the opacity of each tick\n             * mark as a percentage of the pullAmount\n             * offset by max / numTicks so\n             * the tick marks are shown staggered.\n             */\n            const min = i * (max / numTicks);\n            const range = max - min;\n            const start = pullAmount - min;\n            const progression = clamp(0, start / range, 1);\n            el.style.setProperty('opacity', progression.toString());\n        });\n    });\n};\nexport const handleScrollWhileRefreshing = (spinner, lastVelocityY) => {\n    writeTask(() => {\n        // If user pulls down quickly, the spinner should spin faster\n        spinner.style.setProperty('--refreshing-rotation-duration', lastVelocityY >= 1.0 ? '0.5s' : '2s');\n        spinner.style.setProperty('opacity', '1');\n    });\n};\nexport const translateElement = (el, value, duration = 200) => {\n    if (!el) {\n        return Promise.resolve();\n    }\n    const trans = transitionEndAsync(el, duration);\n    writeTask(() => {\n        el.style.setProperty('transition', `${duration}ms all ease-out`);\n        if (value === undefined) {\n            el.style.removeProperty('transform');\n        }\n        else {\n            el.style.setProperty('transform', `translate3d(0px, ${value}, 0px)`);\n        }\n    });\n    return trans;\n};\n// Utils\n// -----------------------------\n/**\n * In order to use the native iOS refresher the device must support rubber band scrolling.\n * As part of this, we need to exclude Desktop Safari because it has a slightly different rubber band effect that is not compatible with the native refresher in Ionic.\n *\n * We also need to be careful not to include devices that spoof their user agent.\n * For example, when using iOS emulation in Chrome the user agent will be spoofed such that\n * navigator.maxTouchPointer > 0. To work around this,\n * we check to see if the apple-pay-logo is supported as a named image which is only\n * true on Apple devices.\n *\n * We previously checked referencEl.style.webkitOverflowScrolling to explicitly check\n * for rubber band support. However, this property was removed on iPadOS and it's possible\n * that this will be removed on iOS in the future too.\n *\n */\nexport const supportsRubberBandScrolling = () => {\n    return navigator.maxTouchPoints > 0 && CSS.supports('background: -webkit-named-image(apple-pay-logo-black)');\n};\nexport const shouldUseNativeRefresher = async (referenceEl, mode) => {\n    const refresherContent = referenceEl.querySelector('ion-refresher-content');\n    if (!refresherContent) {\n        return Promise.resolve(false);\n    }\n    await new Promise((resolve) => componentOnReady(refresherContent, resolve));\n    const pullingSpinner = referenceEl.querySelector('ion-refresher-content .refresher-pulling ion-spinner');\n    const refreshingSpinner = referenceEl.querySelector('ion-refresher-content .refresher-refreshing ion-spinner');\n    return (pullingSpinner !== null &&\n        refreshingSpinner !== null &&\n        ((mode === 'ios' && supportsRubberBandScrolling()) || mode === 'md'));\n};\n"],"mappings":"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"}